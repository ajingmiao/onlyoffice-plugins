{
  "permissions": {
    "allow": [
      "Bash(sed -i '645s/updateRowBinding/bindSelection/' OnlyOfficeEditor.vue)",
      "Bash(sed -i '648a \\ \\ \\ \\ fieldName: `表格行绑定: ${metricsRow.rid}`,\\n\\ \\ \\ \\ displayName: `表格行绑定: ${metricsRow.rid}`,\\n\\ \\ \\ \\ dataType: ''''row'''',\\n\\ \\ \\ \\ category: ''''data-field'''',' OnlyOfficeEditor.vue)",
      "Bash(sed -i '657a \\ \\ \\ \\ \\ \\ operation: ''''update'''',' OnlyOfficeEditor.vue)",
      "Bash(sed -i '657s/hasChildren: !!(metricsRow.children && metricsRow.children.length > 0)/hasChildren: !!(metricsRow.children \\&\\& metricsRow.children.length > 0),/' OnlyOfficeEditor.vue)",
      "Bash(sed -i \"625s/metricType: ''text''/metricType: ''text'',/\" OnlyOfficeEditor.vue)",
      "Bash(sed -i \"s/GET_CHART_SUMMARY: ''getChartSummary''/GET_CHART_SUMMARY: ''getChartSummary'',\\n    UPDATE_BINDING: ''updateBinding'',\\n    UPDATE_CHART_BINDING: ''updateChartBinding'',\\n    UPDATE_ROW_BINDING: ''updateRowBinding''/\" constants.js)",
      "Bash(sed -i '/case COMMANDS.DETECT_CLICK_TYPE:/,/}/a\\\\n      case COMMANDS.UPDATE_BINDING: {\\\n        const updateResult = await this.selectionBinding.updateBinding(data);\\\n        if (updateResult && updateResult.success) {\\\n          return { ok: true, data: updateResult };\\\n        } else {\\\n          return { ok: false, error: updateResult?.error || '\"''\"'Binding update failed'\"''\"' };\\\n        }\\\n      }\\\n\\\n      case COMMANDS.UPDATE_CHART_BINDING: {\\\n        const chartUpdateResult = await this.chartBinding.updateChartBinding(data);\\\n        if (chartUpdateResult && chartUpdateResult.success) {\\\n          return { ok: true, data: chartUpdateResult };\\\n        } else {\\\n          return { ok: false, error: chartUpdateResult?.error || '\"''\"'Chart binding update failed'\"''\"' };\\\n        }\\\n      }\\\n\\\n      case COMMANDS.UPDATE_ROW_BINDING: {\\\n        const rowUpdateResult = await this.selectionBinding.updateRowBinding(data);\\\n        if (rowUpdateResult && rowUpdateResult.success) {\\\n          return { ok: true, data: rowUpdateResult };\\\n        } else {\\\n          return { ok: false, error: rowUpdateResult?.error || '\"''\"'Row binding update failed'\"''\"' };\\\n        }\\\n      }' command-bus.js)",
      "Bash(git checkout -- command-bus.js)",
      "Bash(sed -i '/case COMMANDS.DETECT_CLICK_TYPE:/a\\\\n      case COMMANDS.UPDATE_BINDING: {\\\n        const updateResult = await this.selectionBinding.updateBinding(data);\\\n        if (updateResult && updateResult.success) {\\\n          return { ok: true, data: updateResult };\\\n        } else {\\\n          return { ok: false, error: updateResult?.error || '\"''\"'Binding update failed'\"''\"' };\\\n        }\\\n      }' command-bus.js)",
      "Bash(node --check core/constants.js)",
      "Bash(node --check services/selection-binding-service.js)",
      "Bash(sed -i 's/} else if (scope.tag && tag === scope.tag) {/} else if (scope.tag \\&\\& tag === scope.tag) {\\\n                            isMatch = true;\\\n                        } else {\\\n                            \\/\\/ 尝试解析JSON格式的tag，查找internalId\\\n                            try {\\\n                                if (tag.startsWith(\"\"{\"\") || tag.includes(\"\"internalId\"\")) {\\\n                                    var tagObj = JSON.parse(tag);\\\n                                    if (tagObj \\&\\& tagObj.internalId === scope.rid) {\\\n                                        isMatch = true;\\\n                                    }\\\n                                }\\\n                            } catch (jsonErr) {\\\n                                \\/\\/ 忽略JSON解析错误\\\n                            }\\\n                        }\\\n\\\n                        if (isMatch) {/' selection-binding-service.js)",
      "Bash(sed -i '910a\\\n                        // 调试：显示实际的控件信息\\\n                        console.log(\"\"控件 \"\" + i + \"\": Tag=\\\"\"\"\" + tag + \"\"\\\"\", Alias=\\\"\"\"\" + alias + \"\"\\\"\"\"\");\\\n                        console.log(\"\"查找目标: rid=\\\"\"\"\" + scope.rid + \"\"\\\"\", tag=\\\"\"\"\" + scope.tag + \"\"\\\"\"\"\");' selection-binding-service.js)"
    ],
    "deny": [],
    "ask": []
  }
}